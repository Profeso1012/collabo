(()=>{var e={2838:function(e){e.exports=function(){"use strict";const{entries:e,setPrototypeOf:t,isFrozen:n,getPrototypeOf:i,getOwnPropertyDescriptor:r}=Object;let{freeze:o,seal:s,create:a}=Object,{apply:l,construct:c}="undefined"!=typeof Reflect&&Reflect;o||(o=function(e){return e}),s||(s=function(e){return e}),l||(l=function(e,t,n){return e.apply(t,n)}),c||(c=function(e,t){return new e(...t)});const d=A(Array.prototype.forEach),u=A(Array.prototype.pop),m=A(Array.prototype.push),p=A(String.prototype.toLowerCase),h=A(String.prototype.toString),_=A(String.prototype.match),g=A(String.prototype.replace),E=A(String.prototype.indexOf),f=A(String.prototype.trim),v=A(Object.prototype.hasOwnProperty),C=A(RegExp.prototype.test),b=k(TypeError),T=A(Number.isNaN);function A(e){return function(t){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return l(e,t,i)}}function k(e){return function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return c(e,n)}}function S(e,i){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:p;t&&t(e,null);let o=i.length;for(;o--;){let t=i[o];if("string"==typeof t){const e=r(t);e!==t&&(n(i)||(i[o]=e),t=e)}e[t]=!0}return e}function y(e){for(let t=0;t<e.length;t++)v(e,t)||(e[t]=null);return e}function I(t){const n=a(null);for(const[i,r]of e(t))v(t,i)&&(Array.isArray(r)?n[i]=y(r):r&&"object"==typeof r&&r.constructor===Object?n[i]=I(r):n[i]=r);return n}function L(e,t){for(;null!==e;){const n=r(e,t);if(n){if(n.get)return A(n.get);if("function"==typeof n.value)return A(n.value)}e=i(e)}function n(){return null}return n}const O=o(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),P=o(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),M=o(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),R=o(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),w=o(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),D=o(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),N=o(["#text"]),U=o(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),x=o(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),H=o(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),G=o(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),$=s(/\{\{[\w\W]*|[\w\W]*\}\}/gm),B=s(/<%[\w\W]*|[\w\W]*%>/gm),F=s(/\${[\w\W]*}/gm),V=s(/^data-[\-\w.\u00B7-\uFFFF]/),z=s(/^aria-[\-\w]+$/),W=s(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),q=s(/^(?:\w+script|data):/i),j=s(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),K=s(/^html$/i),Y=s(/^[a-z][.\w]*(-[.\w]+)+$/i);var X=Object.freeze({__proto__:null,MUSTACHE_EXPR:$,ERB_EXPR:B,TMPLIT_EXPR:F,DATA_ATTR:V,ARIA_ATTR:z,IS_ALLOWED_URI:W,IS_SCRIPT_OR_DATA:q,ATTR_WHITESPACE:j,DOCTYPE_NAME:K,CUSTOM_ELEMENT:Y});const J={element:1,attribute:2,text:3,cdataSection:4,entityReference:5,entityNode:6,progressingInstruction:7,comment:8,document:9,documentType:10,documentFragment:11,notation:12},Z=function(){return"undefined"==typeof window?null:window},Q=function(e,t){if("object"!=typeof e||"function"!=typeof e.createPolicy)return null;let n=null;const i="data-tt-policy-suffix";t&&t.hasAttribute(i)&&(n=t.getAttribute(i));const r="dompurify"+(n?"#"+n:"");try{return e.createPolicy(r,{createHTML:e=>e,createScriptURL:e=>e})}catch(e){return console.warn("TrustedTypes policy "+r+" could not be created."),null}};function ee(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z();const n=e=>ee(e);if(n.version="3.1.3",n.removed=[],!t||!t.document||t.document.nodeType!==J.document)return n.isSupported=!1,n;let{document:i}=t;const r=i,s=r.currentScript,{DocumentFragment:l,HTMLTemplateElement:c,Node:A,Element:k,NodeFilter:y,NamedNodeMap:$=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:B,DOMParser:F,trustedTypes:V}=t,z=k.prototype,q=L(z,"cloneNode"),j=L(z,"nextSibling"),Y=L(z,"childNodes"),te=L(z,"parentNode");if("function"==typeof c){const e=i.createElement("template");e.content&&e.content.ownerDocument&&(i=e.content.ownerDocument)}let ne,ie="";const{implementation:re,createNodeIterator:oe,createDocumentFragment:se,getElementsByTagName:ae}=i,{importNode:le}=r;let ce={};n.isSupported="function"==typeof e&&"function"==typeof te&&re&&void 0!==re.createHTMLDocument;const{MUSTACHE_EXPR:de,ERB_EXPR:ue,TMPLIT_EXPR:me,DATA_ATTR:pe,ARIA_ATTR:he,IS_SCRIPT_OR_DATA:_e,ATTR_WHITESPACE:ge,CUSTOM_ELEMENT:Ee}=X;let{IS_ALLOWED_URI:fe}=X,ve=null;const Ce=S({},[...O,...P,...M,...w,...N]);let be=null;const Te=S({},[...U,...x,...H,...G]);let Ae=Object.seal(a(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),ke=null,Se=null,ye=!0,Ie=!0,Le=!1,Oe=!0,Pe=!1,Me=!0,Re=!1,we=!1,De=!1,Ne=!1,Ue=!1,xe=!1,He=!0,Ge=!1;const $e="user-content-";let Be=!0,Fe=!1,Ve={},ze=null;const We=S({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let qe=null;const je=S({},["audio","video","img","source","image","track"]);let Ke=null;const Ye=S({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Xe="http://www.w3.org/1998/Math/MathML",Je="http://www.w3.org/2000/svg",Ze="http://www.w3.org/1999/xhtml";let Qe=Ze,et=!1,tt=null;const nt=S({},[Xe,Je,Ze],h);let it=null;const rt=["application/xhtml+xml","text/html"],ot="text/html";let st=null,at=null;const lt=255,ct=i.createElement("form"),dt=function(e){return e instanceof RegExp||e instanceof Function},ut=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!at||at!==e){if(e&&"object"==typeof e||(e={}),e=I(e),it=-1===rt.indexOf(e.PARSER_MEDIA_TYPE)?ot:e.PARSER_MEDIA_TYPE,st="application/xhtml+xml"===it?h:p,ve=v(e,"ALLOWED_TAGS")?S({},e.ALLOWED_TAGS,st):Ce,be=v(e,"ALLOWED_ATTR")?S({},e.ALLOWED_ATTR,st):Te,tt=v(e,"ALLOWED_NAMESPACES")?S({},e.ALLOWED_NAMESPACES,h):nt,Ke=v(e,"ADD_URI_SAFE_ATTR")?S(I(Ye),e.ADD_URI_SAFE_ATTR,st):Ye,qe=v(e,"ADD_DATA_URI_TAGS")?S(I(je),e.ADD_DATA_URI_TAGS,st):je,ze=v(e,"FORBID_CONTENTS")?S({},e.FORBID_CONTENTS,st):We,ke=v(e,"FORBID_TAGS")?S({},e.FORBID_TAGS,st):{},Se=v(e,"FORBID_ATTR")?S({},e.FORBID_ATTR,st):{},Ve=!!v(e,"USE_PROFILES")&&e.USE_PROFILES,ye=!1!==e.ALLOW_ARIA_ATTR,Ie=!1!==e.ALLOW_DATA_ATTR,Le=e.ALLOW_UNKNOWN_PROTOCOLS||!1,Oe=!1!==e.ALLOW_SELF_CLOSE_IN_ATTR,Pe=e.SAFE_FOR_TEMPLATES||!1,Me=!1!==e.SAFE_FOR_XML,Re=e.WHOLE_DOCUMENT||!1,Ne=e.RETURN_DOM||!1,Ue=e.RETURN_DOM_FRAGMENT||!1,xe=e.RETURN_TRUSTED_TYPE||!1,De=e.FORCE_BODY||!1,He=!1!==e.SANITIZE_DOM,Ge=e.SANITIZE_NAMED_PROPS||!1,Be=!1!==e.KEEP_CONTENT,Fe=e.IN_PLACE||!1,fe=e.ALLOWED_URI_REGEXP||W,Qe=e.NAMESPACE||Ze,Ae=e.CUSTOM_ELEMENT_HANDLING||{},e.CUSTOM_ELEMENT_HANDLING&&dt(e.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Ae.tagNameCheck=e.CUSTOM_ELEMENT_HANDLING.tagNameCheck),e.CUSTOM_ELEMENT_HANDLING&&dt(e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Ae.attributeNameCheck=e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),e.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(Ae.allowCustomizedBuiltInElements=e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Pe&&(Ie=!1),Ue&&(Ne=!0),Ve&&(ve=S({},N),be=[],!0===Ve.html&&(S(ve,O),S(be,U)),!0===Ve.svg&&(S(ve,P),S(be,x),S(be,G)),!0===Ve.svgFilters&&(S(ve,M),S(be,x),S(be,G)),!0===Ve.mathMl&&(S(ve,w),S(be,H),S(be,G))),e.ADD_TAGS&&(ve===Ce&&(ve=I(ve)),S(ve,e.ADD_TAGS,st)),e.ADD_ATTR&&(be===Te&&(be=I(be)),S(be,e.ADD_ATTR,st)),e.ADD_URI_SAFE_ATTR&&S(Ke,e.ADD_URI_SAFE_ATTR,st),e.FORBID_CONTENTS&&(ze===We&&(ze=I(ze)),S(ze,e.FORBID_CONTENTS,st)),Be&&(ve["#text"]=!0),Re&&S(ve,["html","head","body"]),ve.table&&(S(ve,["tbody"]),delete ke.tbody),e.TRUSTED_TYPES_POLICY){if("function"!=typeof e.TRUSTED_TYPES_POLICY.createHTML)throw b('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if("function"!=typeof e.TRUSTED_TYPES_POLICY.createScriptURL)throw b('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');ne=e.TRUSTED_TYPES_POLICY,ie=ne.createHTML("")}else void 0===ne&&(ne=Q(V,s)),null!==ne&&"string"==typeof ie&&(ie=ne.createHTML(""));o&&o(e),at=e}},mt=S({},["mi","mo","mn","ms","mtext"]),pt=S({},["foreignobject","annotation-xml"]),ht=S({},["title","style","font","a","script"]),_t=S({},[...P,...M,...R]),gt=S({},[...w,...D]),Et=function(e){let t=te(e);t&&t.tagName||(t={namespaceURI:Qe,tagName:"template"});const n=p(e.tagName),i=p(t.tagName);return!!tt[e.namespaceURI]&&(e.namespaceURI===Je?t.namespaceURI===Ze?"svg"===n:t.namespaceURI===Xe?"svg"===n&&("annotation-xml"===i||mt[i]):Boolean(_t[n]):e.namespaceURI===Xe?t.namespaceURI===Ze?"math"===n:t.namespaceURI===Je?"math"===n&&pt[i]:Boolean(gt[n]):e.namespaceURI===Ze?!(t.namespaceURI===Je&&!pt[i])&&!(t.namespaceURI===Xe&&!mt[i])&&!gt[n]&&(ht[n]||!_t[n]):!("application/xhtml+xml"!==it||!tt[e.namespaceURI]))},ft=function(e){m(n.removed,{element:e});try{e.parentNode.removeChild(e)}catch(t){e.remove()}},vt=function(e,t){try{m(n.removed,{attribute:t.getAttributeNode(e),from:t})}catch(e){m(n.removed,{attribute:null,from:t})}if(t.removeAttribute(e),"is"===e&&!be[e])if(Ne||Ue)try{ft(t)}catch(e){}else try{t.setAttribute(e,"")}catch(e){}},Ct=function(e){let t=null,n=null;if(De)e="<remove></remove>"+e;else{const t=_(e,/^[\r\n\t ]+/);n=t&&t[0]}"application/xhtml+xml"===it&&Qe===Ze&&(e='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+e+"</body></html>");const r=ne?ne.createHTML(e):e;if(Qe===Ze)try{t=(new F).parseFromString(r,it)}catch(e){}if(!t||!t.documentElement){t=re.createDocument(Qe,"template",null);try{t.documentElement.innerHTML=et?ie:r}catch(e){}}const o=t.body||t.documentElement;return e&&n&&o.insertBefore(i.createTextNode(n),o.childNodes[0]||null),Qe===Ze?ae.call(t,Re?"html":"body")[0]:Re?t.documentElement:o},bt=function(e){return oe.call(e.ownerDocument||e,e,y.SHOW_ELEMENT|y.SHOW_COMMENT|y.SHOW_TEXT|y.SHOW_PROCESSING_INSTRUCTION|y.SHOW_CDATA_SECTION,null)},Tt=function(e){return e instanceof B&&(void 0!==e.__depth&&"number"!=typeof e.__depth||void 0!==e.__removalCount&&"number"!=typeof e.__removalCount||"string"!=typeof e.nodeName||"string"!=typeof e.textContent||"function"!=typeof e.removeChild||!(e.attributes instanceof $)||"function"!=typeof e.removeAttribute||"function"!=typeof e.setAttribute||"string"!=typeof e.namespaceURI||"function"!=typeof e.insertBefore||"function"!=typeof e.hasChildNodes)},At=function(e){return"function"==typeof A&&e instanceof A},kt=function(e,t,i){ce[e]&&d(ce[e],(e=>{e.call(n,t,i,at)}))},St=function(e){let t=null;if(kt("beforeSanitizeElements",e,null),Tt(e))return ft(e),!0;const i=st(e.nodeName);if(kt("uponSanitizeElement",e,{tagName:i,allowedTags:ve}),e.hasChildNodes()&&!At(e.firstElementChild)&&C(/<[/\w]/g,e.innerHTML)&&C(/<[/\w]/g,e.textContent))return ft(e),!0;if(e.nodeType===J.progressingInstruction)return ft(e),!0;if(Me&&e.nodeType===J.comment&&C(/<[/\w]/g,e.data))return ft(e),!0;if(!ve[i]||ke[i]){if(!ke[i]&&It(i)){if(Ae.tagNameCheck instanceof RegExp&&C(Ae.tagNameCheck,i))return!1;if(Ae.tagNameCheck instanceof Function&&Ae.tagNameCheck(i))return!1}if(Be&&!ze[i]){const t=te(e)||e.parentNode,n=Y(e)||e.childNodes;if(n&&t)for(let i=n.length-1;i>=0;--i){const r=q(n[i],!0);r.__removalCount=(e.__removalCount||0)+1,t.insertBefore(r,j(e))}}return ft(e),!0}return e instanceof k&&!Et(e)?(ft(e),!0):"noscript"!==i&&"noembed"!==i&&"noframes"!==i||!C(/<\/no(script|embed|frames)/i,e.innerHTML)?(Pe&&e.nodeType===J.text&&(t=e.textContent,d([de,ue,me],(e=>{t=g(t,e," ")})),e.textContent!==t&&(m(n.removed,{element:e.cloneNode()}),e.textContent=t)),kt("afterSanitizeElements",e,null),!1):(ft(e),!0)},yt=function(e,t,n){if(He&&("id"===t||"name"===t)&&(n in i||n in ct||"__depth"===n||"__removalCount"===n))return!1;if(Ie&&!Se[t]&&C(pe,t));else if(ye&&C(he,t));else if(!be[t]||Se[t]){if(!(It(e)&&(Ae.tagNameCheck instanceof RegExp&&C(Ae.tagNameCheck,e)||Ae.tagNameCheck instanceof Function&&Ae.tagNameCheck(e))&&(Ae.attributeNameCheck instanceof RegExp&&C(Ae.attributeNameCheck,t)||Ae.attributeNameCheck instanceof Function&&Ae.attributeNameCheck(t))||"is"===t&&Ae.allowCustomizedBuiltInElements&&(Ae.tagNameCheck instanceof RegExp&&C(Ae.tagNameCheck,n)||Ae.tagNameCheck instanceof Function&&Ae.tagNameCheck(n))))return!1}else if(Ke[t]);else if(C(fe,g(n,ge,"")));else if("src"!==t&&"xlink:href"!==t&&"href"!==t||"script"===e||0!==E(n,"data:")||!qe[e])if(Le&&!C(_e,g(n,ge,"")));else if(n)return!1;return!0},It=function(e){return"annotation-xml"!==e&&_(e,Ee)},Lt=function(e){kt("beforeSanitizeAttributes",e,null);const{attributes:t}=e;if(!t)return;const i={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:be};let r=t.length;for(;r--;){const o=t[r],{name:s,namespaceURI:a,value:l}=o,c=st(s);let m="value"===s?l:f(l);if(i.attrName=c,i.attrValue=m,i.keepAttr=!0,i.forceKeepAttr=void 0,kt("uponSanitizeAttribute",e,i),m=i.attrValue,i.forceKeepAttr)continue;if(vt(s,e),!i.keepAttr)continue;if(!Oe&&C(/\/>/i,m)){vt(s,e);continue}if(Me&&C(/((--!?|])>)|<\/(style|title)/i,m)){vt(s,e);continue}Pe&&d([de,ue,me],(e=>{m=g(m,e," ")}));const p=st(e.nodeName);if(yt(p,c,m)){if(!Ge||"id"!==c&&"name"!==c||(vt(s,e),m=$e+m),ne&&"object"==typeof V&&"function"==typeof V.getAttributeType)if(a);else switch(V.getAttributeType(p,c)){case"TrustedHTML":m=ne.createHTML(m);break;case"TrustedScriptURL":m=ne.createScriptURL(m)}try{a?e.setAttributeNS(a,s,m):e.setAttribute(s,m),Tt(e)?ft(e):u(n.removed)}catch(e){}}}kt("afterSanitizeAttributes",e,null)},Ot=function e(t){let n=null;const i=bt(t);for(kt("beforeSanitizeShadowDOM",t,null);n=i.nextNode();){if(kt("uponSanitizeShadowNode",n,null),St(n))continue;const t=te(n);n.nodeType===J.element&&(t&&t.__depth?n.__depth=(n.__removalCount||0)+t.__depth+1:n.__depth=1),(n.__depth>=lt||n.__depth<0||T(n.__depth))&&ft(n),n.content instanceof l&&(n.content.__depth=n.__depth,e(n.content)),Lt(n)}kt("afterSanitizeShadowDOM",t,null)};return n.sanitize=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=null,o=null,s=null,a=null;if(et=!e,et&&(e="\x3c!--\x3e"),"string"!=typeof e&&!At(e)){if("function"!=typeof e.toString)throw b("toString is not a function");if("string"!=typeof(e=e.toString()))throw b("dirty is not a string, aborting")}if(!n.isSupported)return e;if(we||ut(t),n.removed=[],"string"==typeof e&&(Fe=!1),Fe){if(e.nodeName){const t=st(e.nodeName);if(!ve[t]||ke[t])throw b("root node is forbidden and cannot be sanitized in-place")}}else if(e instanceof A)i=Ct("\x3c!----\x3e"),o=i.ownerDocument.importNode(e,!0),o.nodeType===J.element&&"BODY"===o.nodeName||"HTML"===o.nodeName?i=o:i.appendChild(o);else{if(!Ne&&!Pe&&!Re&&-1===e.indexOf("<"))return ne&&xe?ne.createHTML(e):e;if(i=Ct(e),!i)return Ne?null:xe?ie:""}i&&De&&ft(i.firstChild);const c=bt(Fe?e:i);for(;s=c.nextNode();){if(St(s))continue;const e=te(s);s.nodeType===J.element&&(e&&e.__depth?s.__depth=(s.__removalCount||0)+e.__depth+1:s.__depth=1),(s.__depth>=lt||s.__depth<0||T(s.__depth))&&ft(s),s.content instanceof l&&(s.content.__depth=s.__depth,Ot(s.content)),Lt(s)}if(Fe)return e;if(Ne){if(Ue)for(a=se.call(i.ownerDocument);i.firstChild;)a.appendChild(i.firstChild);else a=i;return(be.shadowroot||be.shadowrootmode)&&(a=le.call(r,a,!0)),a}let u=Re?i.outerHTML:i.innerHTML;return Re&&ve["!doctype"]&&i.ownerDocument&&i.ownerDocument.doctype&&i.ownerDocument.doctype.name&&C(K,i.ownerDocument.doctype.name)&&(u="<!DOCTYPE "+i.ownerDocument.doctype.name+">\n"+u),Pe&&d([de,ue,me],(e=>{u=g(u,e," ")})),ne&&xe?ne.createHTML(u):u},n.setConfig=function(){ut(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),we=!0},n.clearConfig=function(){at=null,we=!1},n.isValidAttribute=function(e,t,n){at||ut({});const i=st(e),r=st(t);return yt(i,r,n)},n.addHook=function(e,t){"function"==typeof t&&(ce[e]=ce[e]||[],m(ce[e],t))},n.removeHook=function(e){if(ce[e])return u(ce[e])},n.removeHooks=function(e){ce[e]&&(ce[e]=[])},n.removeAllHooks=function(){ce={}},n}return ee()}()},6498:()=>{},6855:(e,t,n)=>{var i,r;i=[n,t,n(3627)],r=function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class i extends Error{constructor(e,t={}){super(),this.errorNumber=`NimbleError-${e}`,this.message=`${this.errorNumber}: ${this.constructor.name}`,this.cause=t,(0,n.nimbleLogError)(`See Error ${this.errorNumber} below ðŸ‘‡`,this.cause),this.customDescriptor={}}}t.default=i}.apply(t,i),void 0===r||(e.exports=r)},3501:(e,t,n)=>{var i,r;i=[n,t,n(6855)],r=function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class i extends n.default{constructor(){super(7)}}t.default=i}.apply(t,i),void 0===r||(e.exports=r)},5088:(e,t,n)=>{var i,r;i=[n,t,n(1631)],r=function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.actions=void 0,t.actions={scrollChanged({commit:e,state:t},{currentScroll:i}){const r=i>t.currentScroll;r!==t.isScrollDown&&e(n.mutations.setScrollDirection,{isScrollDown:r}),e(n.mutations.setCurrentScroll,{currentScroll:i})},changeBreakpoint:function({commit:e,state:t},n){throw new Error("Function not implemented.")},viewportResizeStarted:function({commit:e,state:t},n){throw new Error("Function not implemented.")},viewportResizeEnded:function({commit:e,state:t},n){throw new Error("Function not implemented.")}}}.apply(t,i),void 0===r||(e.exports=r)},9143:(e,t,n)=>{var i;i=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getters=void 0,t.getters={androidVersion:({androidVersion:e})=>e,colorScheme:({colorScheme:e})=>e,currentBreakpoint:({viewport:e})=>e?e.currentBreakpoint:null,currentScroll:({currentScroll:e})=>e,highContrast:({highContrast:e})=>e,isAndroid:({isAndroid:e})=>e,isConnectionFast:({isConnectionFast:e})=>e,isIntersectionObserverAvailable:({isIntersectionObserverAvailable:e})=>e,isReducedMotionOn:({isReducedMotionOn:e})=>e,isScrollDown:({isScrollDown:e})=>e,isTouch:({isTouch:e})=>e,isWebpSupported:({isWebpSupported:e})=>e,resizeType:({resizeType:e})=>e,shouldIgnoreLogging:({nimbleLogIgnore:e})=>e,viewport:({viewport:e})=>e,viewportIsResizing:({viewportIsResizing:e})=>e,viewportSize:({viewportSize:e})=>e}}.apply(t,[n,t]),void 0===i||(e.exports=i)},4863:(e,t,n)=>{var i,r;i=[n,t,n(8686),n(1631),n(5088),n(9143)],r=function(e,t,n,i,r,o){"use strict";var s;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.IDLE=1]="IDLE",e[e.MUTATING=2]="MUTATING",e[e.ACTIONING=3]="ACTIONING"}(s||(s={}));t.default=class{constructor({state:e,actions:t=r.actions,mutations:a=i.mutations,getters:l=o.getters}){this.subscribers=new Map,this.status=s.IDLE,this.baseActions={...r.actions,...t},this.baseMutations={...i.mutations,...a},this.baseGetters=this.setUpGetters({...o.getters,...l}),this.internalState=this.setUpState({...n.state,...e}),this.commit=this.commit.bind(this)}get state(){return this.internalState}get getters(){return this.baseGetters}subscribe(e,t){var n;e&&t&&(this.subscribers.get(e)||this.subscribers.set(e,new Set),null===(n=this.subscribers.get(e))||void 0===n||n.add(t))}unsubscribe(e,t){var n;null===(n=this.subscribers.get(e))||void 0===n||n.delete(t)}commit(e,t){return this.status=s.MUTATING,e(this.internalState,t),this.internalState}get actions(){return this.baseActions}get mutations(){return this.baseMutations}dispatch(e,t){return this.status=s.ACTIONING,e(this,t||{})}notify(e,t){const n=this.subscribers.get(e);if(n)return[...n].forEach((e=>e(t)))}setUpGetters(e){return new Proxy(e,{get:(e,t,n)=>{if(Reflect.has(e,t))return Reflect.get(e,t,n)(this.internalState)}})}setUpState(e){return new Proxy(e,{set:(e,t,n)=>(e[t]=n,this.status!==s.MUTATING&&console.error("STATE POORLY MANAGED"),this.notify(t,{[t]:n}),this.status=s.IDLE,!0)})}}}.apply(t,i),void 0===r||(e.exports=r)},1631:(e,t,n)=>{var i;i=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mutations=void 0,t.mutations={setCurrentScroll(e,{currentScroll:t}){e.currentScroll=t},setScrollDirection(e,{isScrollDown:t}){e.isScrollDown=t},setCurrentViewportSize(e,{width:t,height:n}){e.viewportSize={width:t,height:n}},setIntersectionObserverAvailability(e,{isIntersectionObserverAvailable:t}){e.isIntersectionObserverAvailable=t},setIsTouch(e,{isTouch:t}){e.isTouch=t},setIsAndroid(e,{isAndroid:t}){e.isAndroid=t},setConnectionSpeed(e,{isConnectionFast:t}){e.isConnectionFast=t},setWebpSupport(e,{isWebpSupported:t}){e.isWebpSupported=t},setReducedMotion(e,{isReducedMotionOn:t}){e.isReducedMotionOn=t},setViewport(e,{currentBreakpoint:t,isPortrait:n}){e.viewport={currentBreakpoint:t,isPortrait:n}},setViewportIsResizing(e,{viewportIsResizing:t}){e.viewportIsResizing=t},setResizeType:function(e,{resizeType:t}){e.resizeType=t},setAndroidVersion:function(e,{androidVersion:t}){e.androidVersion=t},setColorScheme:function(e,{colorScheme:t}){e.colorScheme=t},setHighContrast:function(e,{highContrast:t}){e.highContrast=t}}}.apply(t,[n,t]),void 0===i||(e.exports=i)},8686:(e,t,n)=>{var i;i=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.state=void 0,t.state={androidVersion:"",colorScheme:"",currentScroll:0,highContrast:"",isAndroid:!1,isConnectionFast:!1,isIntersectionObserverAvailable:!1,isReducedMotionOn:!1,isScrollDown:!0,isTouch:!1,isWebpSupported:!1,nimbleLogIgnore:!1,resizeType:"",viewport:{currentBreakpoint:"",isPortrait:!1},viewportIsResizing:!1,viewportSize:{width:null,height:null}}}.apply(t,[n,t]),void 0===i||(e.exports=i)},5454:(e,t,n)=>{var i,r;i=[n,t,n(3501)],r=function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=e=>e=(e=e.replace(/\('/g,"__(__")).replace(/'\)/g,"__)__"),r=e=>{let t=JSON.stringify(e);return t=t.replace(/__\(__/g,"('"),t=t.replace(/__\)__/g,"')"),JSON.parse(t)};t.default=(e,t)=>{let o,s=e.getAttribute(t)||"";const a=/'/g;if(s=i(s),s=s.replace(/True/gi,"true"),s=s.replace(/False/gi,"false"),s=s.replace(/\\x/g,"_x"),!s)return{};try{o=JSON.parse(s.replace(a,'"')),o=r(o),Object.keys(o).forEach((e=>{const t=o[e];"string"==typeof t&&(o[e]=decodeURIComponent(t))}))}catch(e){throw new n.default}return o}}.apply(t,i),void 0===r||(e.exports=r)},3627:(e,t,n)=>{var i;i=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.nimbleLogError=t.nimbleLog=t.nimbleLog_=void 0;let n=!1;t.nimbleLog_=(e,t={title:"",data:""},n={isTable:!1,isMain:!1})=>{const i=n.isMain?"font-size: 18px;font-weight: bold;":"margin-left: 16px;";"string"==typeof t.title?e(`%c ${t.title}`,i):e("",t.title),t.data&&(n.isTable?console.table(t.data):e(t.data))};t.nimbleLog=(e,i="",r={isTable:!1,isMain:!1})=>{window.debug&&(n||((0,t.nimbleLog_)(console.info,{title:"ðŸ¤™ Nimble Development Logger",data:i},{isMain:!0,isTable:!1}),n=!0),(0,t.nimbleLog_)(console.info,{title:e,data:i},r))};t.nimbleLogError=(e,n,i={isTable:!1,isMain:!1})=>{window.debug&&(0,t.nimbleLog_)(console.error,{title:e,data:n},i)}}.apply(t,[n,t]),void 0===i||(e.exports=i)},7616:(e,t,n)=>{var i,r;i=[n,t,n(1100),n(5680),n(5428),n(1659),n(9087),n(300)],r=function(e,t,n,i,r,o,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PerksCustomGrid=void 0;class l extends r.default{constructor(e,t,n){super(e,t,n),this.blockCssClass_=this.config_.blockCssClass,this.gridData={},this.hasHeroPerk=!1}dom_(){this.dom={elementGridWrapper:this.element.querySelector(`.${this.blockCssClass_}__container`),emptyWarning:this.element.querySelector(`.${this.blockCssClass_}__empty-card`),helpCard:this.element.querySelector(`.${this.blockCssClass_}__help-card`),perksModal:document.querySelector(".modal-components--perks")}}init_(){this.gridData=this.store_.state.perksFilteredData.cardsData,this.hasHeroPerk=this.store_.state.perksFilteredData.hasHeroPerk,this.gridData.error?this.appendTargetElementToDom(this.dom.emptyWarning,this.dom.elementGridWrapper):this.setupPerksGrid(this.gridData)}getGridCardTemplate(e){const{serviceName:t,category:n,headline:i,cardFooter:r,icon:s,serviceId:a}=e,l=(new Date).getTime(),c=this.global_.getPerkCta||"",d={classes:"image  heading-block__image heading-card__image image--squared",imageSrc:`${s&&s.url?s.url:""}`,cbParam:`?cb=${l}`,alt:`${s&&s.alt?s.alt:t}`,imgSizes:[200]};return`\n    <div class="heading-card  cb-perks-custom-grid__heading-card" style="--background-color: var(--background--fill-light-grey);">\n    <div class="heading-block  heading-card__heading-block heading-block--left">\n      ${n?` <h2 class="eyebrow  heading-block__eyebrow heading-card__eyebrow">${n.toUpperCase()}</h2>`:""}\n      ${(0,o.simpleImageResponsiveComponent)(d)}\n      <h3 class="heading  heading-block__heading heading-card__heading headline---gradient heading--3">\n        ${t}\n      </h3>\n      <p class="body  heading-block__body heading-card__body">\n        ${i}\n      </p>\n      <div class="cta-group  heading-block__cta-group heading-card__cta-group">\n        <button class="cta  cta-group__cta heading-block__cta heading-card__cta cta--primary-blue cta-button"\n          data-get-perk="${a}"\n          data-card-header="${t}"\n          type="button"\n          data-perks-ga-config='${this.getGa4GetPerkEvent_(c,t)}'>\n          <span class="cta__cta-text">\n            ${c}\n          </span>\n        </button>\n      </div>\n    </div>\n      ${r?`<p class="body  heading-card__body body--disclaimer heading-card__disclaimer">\n            ${r}\n          </p>`:""}\n    </div>\n    `}setupPerksGrid(e){if(e&&e.length>0){(0,a.clearWrapper)(this.dom.elementGridWrapper);let t="";e.forEach((e=>{t+=this.getGridCardTemplate(e)})),(0,i.insertInnerHtml)(this.dom.elementGridWrapper,t),this.setGa4ModuleImpression(),this.isChromebook&&this.appendTargetElementToDom(this.dom.helpCard,this.dom.elementGridWrapper),this.setUpGetPerkFlow()}else this.hasHeroPerk&&this.isChromebook?this.appendTargetElementToDom(this.dom.helpCard,this.dom.elementGridWrapper):this.appendTargetElementToDom(this.dom.emptyWarning,this.dom.elementGridWrapper)}appendTargetElementToDom(e,t){null!==e&&(e.classList.remove("hidden"),t.append(e))}setUpGetPerkFlow(){this.dom.elementGridWrapper.querySelectorAll("[data-get-perk]").forEach((e=>{var t;null===(t=this.dom.perksModal)||void 0===t||t.dispatchEvent((0,s.customRedeemPerkEvent)({triggerElement:e,perkId:e.dataset.getPerk||""}))}))}getGa4GetPerkEvent_(e,t=""){return JSON.stringify({click:{event:n.Ga4Events.CTA_CLICK,module_name:this.element.id,section_header:t,link_text:e,link_type:"",link_url:""}})}}t.PerksCustomGrid=l}.apply(t,i),void 0===r||(e.exports=r)},4456:(e,t,n)=>{var i,r;i=[n,t,n(1100),n(5680),n(5428),n(1659),n(9087),n(300),n(8287)],r=function(e,t,n,i,r,o,s,a,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PerksCustomHero=void 0;const c="hero-content-50-50";class d extends r.default{constructor(e,t,n){super(e,t,n),this.heroTitle="",this.blockCssClass_=this.config_.blockCssClass,this.data={}}dom_(){this.dom={elementMainContainer:this.element.querySelector(`.${c}__container`),perksModal:document.querySelector(".modal-components--perks")}}init_(){if(this.data=this.store_.state.perksFilteredData.splitData,this.data.error)return this.element.classList.add("hidden"),void console.error(this.data.error);this.setupPerks(this.data)}getPerkHeroTemplate(e){const{serviceName:t,headline:n,cardFooter:i,icon:r,heroScreenImage:s,serviceId:a,secondaryUrl:d,isDarkDesign:u}=e;u&&this.element.classList.add("has-dark-theme"),this.heroTitle=t;const m=(new Date).getTime(),p=this.element.dataset.perksHeroImage,h=this.global_.getPerkCta||"",_=this.global_.learnMoreCta,g={imageSrc:`${r.url}?cb=${m}`,imageDimensions:{h:48,w:48},alt:`${r.alt||t}`,classes:"image heading-block__image hero-content-50-50__image image--squared",imgSizes:[150]};(null==s?void 0:s.url)&&(s.url=s.url.endsWith("=s0")?s.url.replace(/=s0$/,""):`${s.url}`);const E={imageSrc:`${null==s?void 0:s.url}`,cbParam:`?cb=${m}`,imageDimensions:{h:s.height,w:s.width},classes:"image asset-wrapper__image hero-content-50-50__image image--squared",imgSizes:[700],withPriority:!0,hasImgCompression:!0},f={imageSrc:p,classes:"image asset-wrapper__image hero-content-50-50__image image--squared",imgSizes:[350,700],withPriority:!0},v=[E,s];return`\n    <div class="hero-content-50-50__content">\n    <div class="heading-block  hero-content-50-50__heading-block heading-block--left">\n      ${(0,o.simpleImageComponent)(g)}\n      <h2 class="heading  heading-block__heading hero-content-50-50__heading headline---gradient heading--3">\n        ${t}\n      </h2>\n      <p class="body  heading-block__body hero-content-50-50__body">\n        ${n}\n      </p>\n      <div class="cta-group  heading-block__cta-group hero-content-50-50__cta-group">\n        <button data-get-perk="${a}" class="cta cta-button cta-group__cta heading-block__cta hero-content-50-50__cta cta--primary-blue" type="button" data-perks-ga-config='${this.getGa4GetPerkEvent_(h,t)}'>\n          <span class="cta__cta-text">\n            ${h}\n          </span>\n        </button>\n        ${d?`<a class="cta  cta-group__cta heading-block__cta hero-content-50-50__cta cta--tertiary-blue"\n              href="${(0,l.localizeLink)(d)}">\n              ${_}\n              </a>`:""}\n      </div>\n    </div>\n    ${i?`<p class="body  hero-content-50-50__body body--disclaimer hero-content-50-50__disclaimer">${i}</p>`:""}\n  </div>\n    <div class="${c}__asset-container">\n    <div class="asset-wrapper ${c}__asset-wrapper ${c}__media-asset">\n      ${(0,o.simpleImageResponsiveComponent)(u?E:f)}\n    </div>\n    ${u?"":this.getOverlayImageTemplate(...v)}\n    </div>\n    `}getOverlayImageTemplate(e,t){return`\n      ${t&&t.url?`<div class="${c}__overlay-wrapper">\n            ${(0,o.simpleImageComponent)(e)}\n            </div>`:""}\n    `}setupPerks(e){this.element.classList.remove("entered-once"),e&&e.length>0?((0,a.clearWrapper)(this.dom.elementMainContainer),e.forEach((e=>{const t=this.getPerkHeroTemplate(e);(0,i.insertInnerHtml)(this.dom.elementMainContainer,t)})),this.setGa4ModuleImpression(this.heroTitle),this.setUpGetPerkFlow()):this.element.classList.add("hidden"),setTimeout((()=>{this.element.classList.add("entered-once")}),500)}setUpGetPerkFlow(){this.element.querySelectorAll("[data-get-perk]").forEach((e=>{var t;const n=e;null===(t=this.dom.perksModal)||void 0===t||t.dispatchEvent((0,s.customRedeemPerkEvent)({triggerElement:n,perkId:n.dataset.getPerk||""}))}))}getGa4GetPerkEvent_(e,t=""){return JSON.stringify({click:{event:n.Ga4Events.CTA_CLICK,module_name:this.element.id,section_header:t,link_text:e,link_type:"",link_url:""}})}}t.PerksCustomHero=d}.apply(t,i),void 0===r||(e.exports=r)},52:(e,t,n)=>{var i,r;i=[n,t,n(5680),n(5428)],r=function(e,t,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CbPerksHeadingBlock=void 0;class r extends i.default{constructor(e,t,n){super(e,t,n),this.blockCssClass_=this.config_.blockCssClass}dom_(){this.dom={headingWrapper:this.element.querySelector(`.${this.blockCssClass_}__heading`),headlinesList:this.element.querySelectorAll(`.${this.blockCssClass_}__heading .inner-heading`)}}init_(){(0,n.insertInnerHtml)(this.dom.headingWrapper,""),this.isChromebook?(0,n.insertInnerHtml)(this.dom.headingWrapper,this.dom.headlinesList[1].innerHTML):(0,n.insertInnerHtml)(this.dom.headingWrapper,this.dom.headlinesList[0].innerHTML),this.element.classList.remove("invisible"),this.setGa4ModuleImpression(this.dom.headingWrapper.innerText)}}t.CbPerksHeadingBlock=r}.apply(t,i),void 0===r||(e.exports=r)},9478:(e,t,n)=>{var i,r;i=[n,t,n(8173),n(9041),n(1100),n(5680),n(5428),n(3222),n(2590),n(8139),n(9087),n(300),n(8201),n(8975),n(761)],r=function(e,t,n,i,r,o,s,a,l,c,d,u,m,p,h){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CbPerksModal=void 0;const _="modal-content--enable",g="is-visible",E="not-cb-selected",f="outdated-cb-selected",v="redeem-perk",C="perk-promo",b="data-perks-current-perk";class T extends s.default{constructor(e,t,n){super(e,t,n),this.isOpened=!1,this.modalTriggers=[],this.perksData=[],this.sectionHeaderValue="",this.currentPerk={},this.modalHeadlineImage="",this.showPerkID="",this.blockCssClass_=this.config_.blockCssClass,this.isSupportedOs="number"==typeof(0,m.chromebookOsVersion)()&&(0,m.chromebookOsVersion)()>=l.MIN_CHROMEOS_VERSION,this.isSupportedVersion=this.isChromebook&&this.isSupportedOs,this.open=this.open.bind(this),this.close=this.close.bind(this),this.setCloseModalBehavior=this.setCloseModalBehavior.bind(this),this.handleBackDropClick=this.handleBackDropClick.bind(this),this.handleKeyBoardClose=this.handleKeyBoardClose.bind(this)}dom_(){this.dom={perksModalContainer:this.element.querySelector(`.${this.blockCssClass_}__wrapper`),perkFlowCb:this.element.querySelector(`.${v}__cb`),redeemPerkTermsContent:this.element.querySelector(`.${v}-terms`),perkFlowTermsHeadline:this.element.querySelector(`.${v}-terms__headline .heading`),redeemPerkContHeadline:this.element.querySelector(`.${v}-steps__headline .heading`),redeemPerkContHeadlineImage:this.element.querySelector(`.${v}__headline-image`),redeemPerkTermsDetails:this.element.querySelector(`.${v}-terms__detail`),redeemPerkStepsDetail:this.element.querySelector(`.${v}-steps-detail`),redeemPerkRedeemContent:this.element.querySelector(`.${v}-steps`),notEligibleContent:this.element.querySelector(`.${v}-not-eligible`),perkFlowNoneCb:this.element.querySelector(`.${v}__not-cb`),perkFlowNotSupportedCb:this.element.querySelector(`.${v}__not-supported-cb`),promoCodeInput:this.element.querySelector(`.${C}-code__input`),copyPromoCodeBtn:this.element.querySelector(`.${C}-code__copy`),promoCodeIsCopied:this.element.querySelector(`.${C}-code__copied`),perksModalCloseButton:this.element.querySelector(".modal__close"),perksModalCloseButtonElements:this.element.querySelectorAll(".redeem-perk__close-modal"),redeemPerkContBtn:this.element.querySelector(".redeem-perk__btn-redeem-continue"),perkRedeemBtn:this.element.querySelector(".redeem-perk__btn-redeem-on")}}init_(){this.element.addEventListener(l.CustomEvents.CUSTOM_REGISTER_REDEEM_PERK,this.createRedeemPerks_.bind(this)),this.perksData=this.store_.state.perksFilteredData.allAvailablePerks,this.addListeners(),(0,n.isDev)()&&new a.default,this.checkShowPerk_(),this.setGa4ModuleImpression(),this.setModalActionListeners_(),this.setModalCloseListeners_(),this.registerCtaModalGa4Events_(this.element),this.registerInlineLinksGa4Events_()}addListeners(){this.element.addEventListener(r.Events.TRANSITIONEND,this.setCloseModalBehavior),this.element.addEventListener(r.Events.MOUSEDOWN,this.handleBackDropClick),this.element.addEventListener(r.Events.CANCEL,this.handleKeyBoardClose)}registerInlineLinksGa4Events_(){[...this.dom.perksModalContainer.querySelectorAll("a:not([class])"),...this.dom.perksModalContainer.querySelectorAll('a[class="disclaimer"]')].forEach((e=>{e.addEventListener(r.Events.CLICK,(e=>{this.onAnalyticsNonCta_(e)})),this.setGa4Event_(e,r.Ga4Events.GENERAL_LINK_CLICK_MODAL)}))}registerCtaModalGa4Events_(e){e.querySelectorAll("a[class]").forEach((e=>{e.classList.contains("disclaimer")||(e.addEventListener(r.Events.CLICK,(e=>{this.onAnalyticsCta_(e)})),this.setGa4Event_(e,r.Ga4Events.CTA_CLICK_MODAL))}))}setUpTermsAnalytics_(){const e=[...this.dom.redeemPerkTermsDetails.querySelectorAll("a:not([class])"),...this.dom.redeemPerkTermsDetails.querySelectorAll('a[class="disclaimer"]')];e.forEach((e=>{e.addEventListener(r.Events.CLICK,(e=>{this.onAnalyticsNonCta_(e)})),this.setGa4Event_(e,r.Ga4Events.GENERAL_LINK_CLICK_MODAL)})),this.analyticsService_.setupTriggers(e)}setModalActionListeners_(){this.dom.redeemPerkContBtn.addEventListener(r.Events.CLICK,this.onPerkFlowContClick_.bind(this)),this.setGa4Event_(this.dom.redeemPerkContBtn,r.Ga4Events.CTA_CLICK_MODAL),this.dom.copyPromoCodeBtn.addEventListener(r.Events.CLICK,this.onCopyPromoCodeClicked_.bind(this))}setModalCloseListeners_(){const e=[this.dom.perksModalCloseButton,...this.dom.perksModalCloseButtonElements];null==e||e.forEach((e=>{e.addEventListener(r.Events.CLICK,(e=>{this.close(),this.sendGa4PopupClose_(e.currentTarget)})),this.setGa4Event_(e,r.Ga4Events.POP_UP_CLOSE)}))}handleBackDropClick(e){e.target===e.currentTarget&&(this.close(),this.sendGa4PopupClose_(this.dom.perksModalCloseButton))}handleKeyBoardClose(e){e.preventDefault(),this.close(),this.sendGa4PopupClose_(this.dom.perksModalCloseButton)}open(){this.element.showModal(),this.element.classList.add("modal--visible"),this.global_.document.documentElement.classList.add("global-disable-scroll"),this.isOpened=!0,this.element.setAttribute(r.A11y.ARIA_HIDDEN,"false")}close(){this.element.classList.add("modal--transition"),this.isOpened=!1}setCloseModalBehavior(){this.isOpened||(this.element.close(),this.global_.document.documentElement.classList.remove("global-disable-scroll"),this.element.classList.remove("modal--transition"),this.element.classList.remove("modal--visible"),this.element.setAttribute(r.A11y.ARIA_HIDDEN,"true"),this.hideModal_())}hideModal_(){this.element.setAttribute(b,""),this.dom.redeemPerkContBtn.disabled=!1,this.dom.redeemPerkTermsContent.classList.remove(_),this.dom.perkFlowNoneCb.classList.remove(_),this.dom.perkFlowCb.classList.remove(_),this.dom.promoCodeIsCopied.classList.remove(g),this.dom.perkRedeemBtn.setAttribute("href","#"),this.dom.redeemPerkTermsContent.classList.remove(_),this.dom.redeemPerkRedeemContent.classList.remove(_),this.dom.notEligibleContent.classList.remove(_),(0,o.insertInnerHtml)(this.dom.perkFlowTermsHeadline,""),(0,o.insertInnerHtml)(this.dom.redeemPerkTermsDetails,""),(0,o.insertInnerHtml)(this.dom.redeemPerkStepsDetail,""),this.dom.perksModalContainer.classList.remove(E)}onPerkFlowContClick_(e){var t;const i=(null===(t=(0,n.getLocales)().locale)||void 0===t?void 0:t.split("_"))||"",r=i&&["en","ALL,ALL"].includes(null==i?void 0:i.toString())?"US":i[i.length-1].toUpperCase();this.dom.redeemPerkContBtn.disabled=!0;const o=(0,m.getOtcHashValue)(),s="disney.2019"===this.currentPerk.serviceId?"Google":this.currentPerk.serviceName,a={serviceId:this.currentPerk.serviceId,serviceName:s,origin:window.location.href,isGroupType:!1,requestNonce:`${Math.floor(Math.random()*(new Date).getTime()+1)},${r}`,failureCallback:e=>{console.error("failure:",e),this.onEligibilityResponse_(e)},successCallback:e=>{this.onEligibilityResponse_(e)}};o&&(a.opt_otc=o);"iframe"===this.currentPerk.redeemType||this.isEligibleOverride?this.onEligibilityResponse_(l.ELIGIBILITY_RESPONSE_MOCK):(null===chrome||void 0===chrome?void 0:chrome.runtime)?echo.checkEligibility(a):this.onEligibilityResponse_("RETRY"),this.onAnalyticsCta_(e)}onEligibilityResponse_(e){if(e&&"RETRY"!==e){const t=(0,m.getOtcHashValue)(),{eligibilityResponse:n}=e;this.dom.redeemPerkContBtn.disabled=!1;const i=document.createTextNode(this.currentPerk.redeemButtonTitle);let r=this.currentPerk.redeemUrlFormat||"";if("iframe"!==this.currentPerk.redeemType&&n.promoCode&&(r=r.replace("[[CODE]]",n.promoCode.split(",").pop()||"")),t&&"iframe"===this.currentPerk.redeemType&&(r+=`&otc=${t}`),this.currentPerk.redirectOnEligible)return void(window.location.href=(0,m.formatRedeemURL)(r));this.dom.promoCodeInput.value=n.promoCode,this.dom.copyPromoCodeBtn.setAttribute("data-event-label",n.promoCode),this.dom.perkRedeemBtn.setAttribute("href",r),this.dom.perkRedeemBtn.setAttribute("target","_blank"),this.dom.perkRedeemBtn.removeChild(this.dom.perkRedeemBtn.firstChild),this.dom.perkRedeemBtn.appendChild(i),this.dom.redeemPerkTermsContent.classList.remove(_),this.dom.redeemPerkRedeemContent.classList.add(_),this.dom.perksModalCloseButton.focus(),this.activeModalElement=this.dom.redeemPerkRedeemContent}else this.dom.redeemPerkTermsContent.classList.remove(_),this.dom.notEligibleContent.classList.add(_),this.dom.perksModalCloseButton.focus(),this.activeModalElement=this.dom.notEligibleContent}onCopyPromoCodeClicked_(){this.dom.promoCodeInput.select(),document.execCommand(r.Commands.COPY),this.dom.promoCodeIsCopied.classList.add(g),this.dom.promoCodeIsCopied.focus()}redirectToMain_(){location.replace(location.origin+location.pathname)}checkShowPerk_(){const e=new URLSearchParams(window.location.search);this.showPerkID=e.get("id")||"",this.showPerkID&&(0,i.isCurrentPathName)("perks")&&this.createAutoOpeningModal_(this.showPerkID)}createAutoOpeningModal_(e){this.element.dispatchEvent((0,d.customRedeemPerkEvent)({triggerElement:this.element,perkId:e||"",hasAutoOpening:!0}))}createRedeemPerks_(e){const{triggerElement:t,perkId:n,hasAutoOpening:i}=e.detail;this.modalTriggers.includes(t)||(i?(this.showCurrentPerk_(n),this.open(),this.dom.perksModalCloseButton.focus()):t.addEventListener(r.Events.CLICK,(e=>{e.preventDefault(),this.showCurrentPerk_(n),this.open(),this.dom.perksModalCloseButton.focus()})),this.modalTriggers.push(t))}showCurrentPerk_(e){this.setModalContent_(e);const t=this.perksData.find((t=>t.id===e));t?this.sectionHeaderValue=t.serviceName:this.redirectToMain_()}setModalContent_(e){let t;if(this.element.setAttribute(b,e),this.isChromebook){const n=()=>this.notSupportedMessage_(E,f,this.dom.perkFlowNoneCb,this.dom.perkFlowNotSupportedCb);t=this.isSupportedVersion?this.redeemMessage_(e):n()}else t=this.notSupportedMessage_(f,E,this.dom.perkFlowNotSupportedCb,this.dom.perkFlowNoneCb);return t}notSupportedMessage_(e,t,n,i){this.dom.perksModalContainer.classList.remove(e,t),this.dom.perksModalContainer.classList.add(t),n.classList.remove(_),i.classList.add(_),this.activeModalElement=i}redeemMessage_(e){var t;this.currentPerk=this.perksData.find((t=>t.id===e)),this.currentPerk||this.redirectToMain_(),(0,o.insertInnerHtml)(this.dom.perkFlowTermsHeadline,this.currentPerk.headline),this.dom.perkFlowTermsHeadline.setAttribute("aria-label",this.currentPerk.headline),(0,o.insertInnerHtml)(this.dom.redeemPerkContHeadline,this.currentPerk.headline),this.dom.redeemPerkContHeadline.setAttribute("aria-label",this.currentPerk.headline),this.modalHeadlineImage=(null===(t=this.currentPerk.modalHeadlineImage)||void 0===t?void 0:t.url)?this.currentPerk.modalHeadlineImage.url:"",this.dom.redeemPerkContHeadlineImage.className="",this.dom.redeemPerkContHeadlineImage.classList.add("redeem-perk__headline-image"),(0,u.clearWrapper)(this.dom.redeemPerkContHeadlineImage),this.modalHeadlineImage&&(0,o.insertInnerHtml)(this.dom.redeemPerkContHeadlineImage,`<img\n        class="image  modal-content__image image--landscape"\n        src="${this.modalHeadlineImage}"\n        alt="${this.currentPerk.headline}"\n        loading="lazy">`);const n=this.currentPerk.modalHeadlineImgPosition?this.currentPerk.modalHeadlineImgPosition:"center";n&&this.dom.redeemPerkContHeadlineImage.classList.add(`redeem-perk__headline-image--${n}`),(0,o.insertInnerHtml)(this.dom.redeemPerkTermsDetails,this.currentPerk.terms),(0,o.insertInnerHtml)(this.dom.redeemPerkStepsDetail,this.currentPerk.redeemSteps),this.dom.redeemPerkTermsContent.classList.add(_),this.dom.perkFlowCb.classList.add(_),this.activeModalElement=this.dom.redeemPerkTermsContent,this.setUpTermsAnalytics_()}getSectionHeaderFromActiveModal_(){let e=this.element.querySelector(`.${_}`);e.classList.contains(`${v}__cb`)&&(e=e.querySelector(`.${_}`));return e.querySelector(".heading").innerText}sendGa4PopupClose_(e){var t;const n=(null===(t=null==e?void 0:e.textContent)||void 0===t?void 0:t.trim())||(null==e?void 0:e.getAttribute("aria-label")),i=n||this.dom.perksModalCloseButton.getAttribute("aria-label"),o={event:r.Ga4Events.POP_UP_CLOSE,module_name:this.element.id,section_header:this.sectionHeaderValue,link_text:i,modal_name:(0,p.getActiveModalName)(this.activeModalElement)};this.analyticsService_.track(o,{trigger:"custom_event",element:null!=e?e:void 0})}onAnalyticsCta_(e){var t;const n=e.currentTarget,i=(null===(t=null==n?void 0:n.textContent)||void 0===t?void 0:t.trim())||"",o={event:r.Ga4Events.CTA_CLICK_MODAL,module_name:this.element.id,section_header:this.sectionHeaderValue,link_text:i,link_url:n.href||void 0,link_type:!0,modal_name:(0,p.getActiveModalName)(n)};this.analyticsService_.track((0,c.processCustomDimensions)(n,o),{trigger:"custom_event",element:null!=n?n:void 0})}onAnalyticsNonCta_(e){const t=e.currentTarget,n=t.href,i=(t.textContent||t.title).trim(),o=(0,h.getCurrentScrollPercentage)(),s={event:r.Ga4Events.GENERAL_LINK_CLICK_MODAL,module_name:this.element.id,section_header:this.getSectionHeaderFromActiveModal_(),link_text:i,link_url:n,link_type:!0,scroll_position:`${o}%`,modal_name:(0,p.getActiveModalName)(t)};this.analyticsService_.track((0,c.processCustomDimensions)(t,s),{trigger:"custom_event",element:null!=t?t:void 0})}setGa4Event_(e,t,n="custom_event"){const i=JSON.stringify({[n]:{event:t||r.Ga4Events.CTA_CLICK,module_name:this.element.id}});e.setAttribute("data-perks-ga-config",i)}}t.CbPerksModal=T}.apply(t,i),void 0===r||(e.exports=r)},1100:(e,t,n)=>{var i;i=function(e,t){"use strict";var n,i,r,o,s;Object.defineProperty(t,"__esModule",{value:!0}),t.DataAttributes=t.Ga4Events=t.SectionTypes=t.HandlerTypes=t.Directions=t.NodeTypes=t.MEDIA_READY_STATES=t.VideoPlayerState=t.Viewport=t.VideoAttribute=t.ScreenSize=t.ServiceName=t.A11y=t.Commands=t.CustomEvents=t.Events=t.Attribute=void 0,function(e){e.Hidden="hidden",e.Href="href",e.Title="title"}(n||(t.Attribute=n={})),function(e){e.ANIMATION_END="animationend",e.BLUR="blur",e.CANCEL="cancel",e.CHANGE="change",e.CLICK="click",e.DOM_CONTENT_READY="DOMContentReady",e.ENDED="ended",e.FOCUS="focus",e.FOCUSOUT="focusout",e.HASHCHANGE="hashchange",e.HOVER="hover",e.KEYDOWN="keydown",e.KEYPRESS="keypress",e.KEYUP="keyup",e.LOAD="load",e.LOADED_METADATA="loadedmetadata",e.MOUSEDOWN="mousedown",e.MOUSEENTER="mouseenter",e.MOUSELEAVE="mouseleave",e.MOUSEMOVE="mousemove",e.MOUSEOVER="mouseover",e.MOUSEUP="mouseup",e.MOUSEWHEEL="mousewheel",e.NONE="none",e.ORIENTATION_CHANGE="orientationchange",e.PAN="pan",e.PAN_END="panend",e.PAN_LEFT="panleft",e.PAN_MOVE="panmove",e.PAN_RIGHT="panright",e.PAN_START="panstart",e.PAUSE="pause",e.PLAY="play",e.POINTERCANCEL="pointercancel",e.POINTERDOWN="pointerdown",e.POINTERMOVE="pointermove",e.POINTERUP="pointerup",e.POPSTATE="popstate",e.RESIZE="resize",e.SCROLL="scroll",e.SCROLL_END="scrollend",e.SWIPE="swipe",e.SWIPE_LEFT="swipeleft",e.SWIPE_RIGHT="swiperight",e.TIME_UPDATE="timeupdate",e.TOUCHCANCEL="touchcancel",e.TOUCHEND="touchend",e.TOUCHMOVE="touchmove",e.TOUCHSTART="touchstart",e.TRANSITIONEND="transitionend",e.WHEEL="wheel"}(i||(t.Events=i={})),function(e){e.CUSTOM_CLEAR_FILTERS_AND_SHOW_RESULTS="custoclearfiltersandshowresults",e.CUSTOM_EMPTY_STATE_TOGGLE="custoemptystatetoggle",e.CUSTOM_VIDEO_TRIGGER="customvideotrigger",e.CUSTOM_RESET_VIDEO_MODAL_CLOSE="customresetvideomodalclose",e.STOP="stop",e.UPDATE_ASSET_VIEWER="updateassetviewer",e.UPDATE_THUMBNAIL_SLIDER="updatethumbnailslider",e.YT_VIDEO_LOADED="ytvideoloaded",e.SHOW_FILTERS_RESULT="showfiltersresult",e.RENDER_FILTERS_RESULT="renderfiltersresult",e.SHOULD_UPDATE_DEVICE_RESULTS="shouldupdatedeviceresults",e.SHOULD_REVERT_FILTER_SELECTION="shouldrevertfilterselection",e.CLOSE_MODAL="closemodal",e.CLOSE_FILTERS_MODAL="closefiltermodal",e.EXPERIENCE_ADD_COMPARISON_ITEM="deviceExperience.addComparisonItem",e.EXPERIENCE_CLEAR_COMPARISON_ITEMS="deviceExperience.clearComparisonItems",e.EXPERIENCE_REMOVE_COMPARISON_ITEM="deviceExperience.removeComparisonItem",e.EXPERIENCE_TOGGLE_DEVICE_CHECKBOX="deviceExperience.toggleDeviceCheckbox",e.EXPERIENCE_SELECT_SKU="deviceExperience.selectsku",e.EXPERIENCE_ADJUST_ITEMS_CHANGE="deviceExperience.itemsChange"}(r||(t.CustomEvents=r={})),t.Commands={COPY:"copy"},t.A11y={ARIA_CONTROLS:"aria-controls",ARIA_CURRENT:"aria-current",ARIA_DISABLED:"aria-disabled",ARIA_SELECTED:"aria-selected",ARIA_SETSIZE:"aria-setsize",ARIA_POSINSET:"aria-posinset",ARIA_EXPANDED:"aria-expanded",ARIA_HASPOPUP:"aria-haspopup",ARIA_LABELLEDBY:"aria-labelledby",ARIA_LABEL:"aria-label",ARIA_LIVE:"aria-live",ARIA_HIDDEN:"aria-hidden",TAB_INDEX:"tabindex",ROLE:"role"},function(e){e.UrlData="url-data",e.Breakpoint="breakpoint",e.DevicesFilter="devices-filter",e.Scroll="scroll",e.Analytics="analytics"}(o||(t.ServiceName=o={})),t.ScreenSize={DESKTOP:1024,MOBILE:768,SMALL_MOBILE:480,TABLET:1280},t.VideoAttribute={AUTOPLAY:"autoplay",CONTROLS:"controls",FULLSCREEN:"fullscreen",IN_MODAL:"openInModal",POSTER_IMAGE:"posterImage",START_FROM:"startFrom",VIDEO_ID:"videoId"},function(e){e.Small="sm",e.Medium="md",e.Large="lg",e.ExtraLarge="xl"}(s||(t.Viewport=s={})),t.VideoPlayerState={BUFFERING:3,ENDED:0,PAUSED:2,PLAYING_PROGRESS:10,PLAYING:1,UNSTARTED:-1,VIDEO_CUED:5},t.MEDIA_READY_STATES={HAVE_NOTHING:0,HAVE_METADATA:1,HAVE_CURRENT_DATA:2,HAVE_FUTURE_DATA:3,HAVE_ENOUGH_DATA:4},t.NodeTypes={ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11},t.Directions={LEFT:"left",RIGHT:"right"},t.HandlerTypes={SCROLL:"scroll",BULLET:"bullet",ARROW:"arrow",SWIPE:"swipe",KEY:"key"},t.SectionTypes={ASSET_VIEWER:"asset-viewer",THUMBNAIL_SLIDER:"thumbnail-slider"},t.Ga4Events={CAROUSEL_SCROLL_CLICK:"carousel_scroll_click",IMAGE_CARD_EXPAND:"image_card_expand",IMAGE_CARD_CONTRACT:"image_card_contract",VIEW_LESS_CLICK:"view_less_click",VIEW_MORE_CLICK:"view_more_click",DEVICE_CAROUSEL_SCROLL_CLICK:"device_carousel_scroll_click",CTA_CLICK:"cta_click",MODULE_IMPRESSION:"module_impression",POP_UP_CLOSE:"pop_up_close",FILTER_ADD:"filter_add",FILTER_REMOVE:"filter_remove",MOBILE_MENU_FILTER_OPEN:"mobile_menu_filter_open",MOBILE_MENU_FILTER_CLOSE:"mobile_menu_filter_close",CTA_CLICK_MODAL:"cta_click_modal",GENERAL_LINK_CLICK_MODAL:"general_link_click_modal",MOBILE_NAV_OPEN:"mobile_nav_open",MOBILE_NAV_CLOSE:"mobile_nav_close",ACCORDION_OPEN:"accordion_open",ACCORDION_CLOSE:"accordion_close"},t.DataAttributes={DATA_NIMBLE_COMPONENT:"data-nimble-component"}}.apply(t,[n,t]),void 0===i||(e.exports=i)},830:(e,t,n)=>{var i;i=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getValidDate=void 0,t.getValidDate=function(e){const t=e?new Date(e.replace(/-/g,"/")):null;return t&&t instanceof Date&&!isNaN(t.getTime())?t:e}}.apply(t,[n,t]),void 0===i||(e.exports=i)},5680:(e,t,n)=>{var i,r;i=[n,t,n(2838)],r=function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isSafeUrl=t.insertInnerHtml=void 0,t.insertInnerHtml=function(e,t){window.trustedTypes&&window.trustedTypes.defaultPolicy?e.innerHTML=window.trustedTypes.defaultPolicy.createHTML(t):e.innerHTML=(0,n.sanitize)(t,{USE_PROFILES:{html:!0,svg:!0,svgFilters:!0},RETURN_TRUSTED_TYPE:!1,ADD_TAGS:["use"],ADD_ATTR:["fetchpriority"]})},t.isSafeUrl=function(e){const t=[new RegExp("^https://www\\.googletagmanager\\.com"),new RegExp("^https://www\\.google-analytics\\.com"),new RegExp("^https://www\\.google\\.[a-zA-Z]{2,}"),new RegExp("^https://googleads\\.g\\.doubleclick\\.net"),new RegExp("^https://www\\.youtube\\.com"),new RegExp("^https://www\\.gstatic\\.com")],n=new URL(e,document.baseURI);let i=!1;return i=n.origin===window.location.origin||t.some((e=>e.test(n.origin))),i}}.apply(t,i),void 0===r||(e.exports=r)},8173:(e,t,n)=>{var i,r;i=[n,t,n(1100)],r=function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getLocales=t.isProd=t.isDev=t.isSafari=t.isIpad=t.isMobile=void 0,t.isMobile=function(){return window.innerWidth<=n.ScreenSize.MOBILE},t.isIpad=function(){return navigator.userAgent.match(/Mac/)&&navigator.maxTouchPoints},t.isSafari=function(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)},t.isDev=function(){return"dev"===window.chromebookEnv},t.isProd=function(){return"prod"===window.chromebookEnv},t.getLocales=function(){var e,t,n,i;let r={};const o=null===(e=document.querySelector("html"))||void 0===e?void 0:e.attributes;return o&&o.getNamedItem("locale")&&(r={locale:null===(t=o.getNamedItem("locale"))||void 0===t?void 0:t.value,lang:null===(n=o.getNamedItem("lang"))||void 0===n?void 0:n.value,localeAlias:null===(i=o.getNamedItem("locale_alias"))||void 0===i?void 0:i.value}),r}}.apply(t,i),void 0===r||(e.exports=r)},4871:(e,t,n)=>{var i;i=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getConfig=void 0;t.getConfig=(e,t)=>{let r,o=e.getAttribute(t)||"{}";const s=/'/g;o=n(o),o=o.replace(/True/gi,"true"),o=o.replace(/False/gi,"false");try{r=JSON.parse(o.replace(s,'"')),r=i(r),Object.keys(r).forEach((e=>{const t=r[e];"string"==typeof t&&(r[e]=decodeURIComponent(t))}))}catch(e){r={}}return r};const n=e=>{let t=e;return t=t.replace(/\('/g,"__(__"),t=t.replace(/'\)/g,"__)__"),t},i=e=>{let t=JSON.stringify(e);return t=t.replace(/__\(__/g,"('"),t=t.replace(/__\)__/g,"')"),JSON.parse(t)}}.apply(t,[n,t]),void 0===i||(e.exports=i)},9041:(e,t,n)=>{var i;i=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isCurrentPathName=void 0,t.isCurrentPathName=function(e){return window.location.pathname.split("/").includes(e)}}.apply(t,[n,t]),void 0===i||(e.exports=i)},3522:(e,t,n)=>{var i;i=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getUrlParameter=void 0,t.getUrlParameter=function(e,t){const n=new RegExp(`[?&]${e}=([^&#]*)`,"i").exec(t);return n?n[1]:""}}.apply(t,[n,t]),void 0===i||(e.exports=i)},5428:(e,t,n)=>{var i,r;i=[n,t,n(1100),n(4871),n(2590),n(8201)],r=function(e,t,n,i,r,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(e,t,n){this.global_=window,this.isChromebook=(0,o.isChromebook)(),this.isEligibleOverride=(0,o.isEligibleOverride)(),this.element=e,this.config_=this.getDataConfiguration_(),this.store_=t,this.analyticsService_=n}build(){this.element&&(this.dom_(),this.init_())}dom_(){}init_(){}getDataConfiguration_(){return(0,i.getConfig)(this.element,"data-cb-component-config")}setGa4ModuleImpression(e=""){this.element.setAttribute("data-perks-ga-config",JSON.stringify({[r.AnalyticsTriggers.ELEMENT_IS_VISIBLE]:{event:n.Ga4Events.MODULE_IMPRESSION,module_name:this.element.id,section_header:e}}))}}}.apply(t,i),void 0===r||(e.exports=r)},1659:(e,t,n)=>{var i,r;i=[n,t,n(9915)],r=function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.simpleImageResponsiveComponent=t.simpleImageComponent=void 0;t.simpleImageComponent=({imageSrc:e,imageDimensions:t,alt:i,classes:r,isLazy:o,imgSizes:s=[700],cbParam:a="",withPriority:l=!1,hasImgCompression:c=!1})=>{const d=c?"-v1":"";return`\n  <img${r&&"string"==typeof r?` class="${r}"`:""}${(null==t?void 0:t.h)&&"number"==typeof t.h?` height="${t.h}"`:""}${(null==t?void 0:t.w)&&"number"==typeof t.w?` width="${t.w}"`:""}\n    fetchpriority="${l?"high":"auto"}"\n    loading="${(0,n.loadingAttr)(o)}"\n    src="${e}=w${s[0]}${d}-rw-e365${a}"\n    alt="${(0,n.altAttr)(i)}"/>\n  `};t.simpleImageResponsiveComponent=({imageSrc:e,imageDimensions:t,alt:i,classes:r,isLazy:o,imgSizes:s=[768,1400],cbParam:a="",withPriority:l=!1})=>{const c=r&&"string"==typeof r?` class="${r}"`:"",d=(null==t?void 0:t.h)&&"number"==typeof t.h?` height="${t.h}"`:"",u=(null==t?void 0:t.w)&&"number"==typeof t.w?` width="${t.w}"`:"",m=s.map((t=>`${e}=w${t}-rwa-e365-v1${a} ${t}w`));return`\n  <img${c}${d}${u}\n    fetchpriority="${l?"high":"auto"}"\n    loading="${(0,n.loadingAttr)(o)}"\n    src="${e}=w${s[0]}-rwa-e365-v1${a}"\n    alt="${(0,n.altAttr)(i)}"\n    sizes="100vw"\n    srcset="${m.join(", ")}"\n    style="--aspect-ratio: auto;"/>\n  `}}.apply(t,i),void 0===r||(e.exports=r)},7182:(e,t,n)=>{var i,r;i=[n,t,n(2590),n(5680)],r=function(e,t,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(){this.inputs=[{label:"Simulate Chromebook",id:n.TEST_PARAMS.SIMULATE_CHROMEBOOK,type:"checkbox"},{label:"Simulate eligible",id:n.TEST_PARAMS.SIMULATE_ELIGIBLE,type:"checkbox"},{label:"Override current date",id:n.TEST_PARAMS.OVERRIDE_DATE,type:"date"},{label:"Override current OS",id:n.TEST_PARAMS.SIMULATE_OS_VERSION,type:"number"}],this.init()}init(){this.render(),this.initDom(),this.checkParams()}render(){const e=document.querySelector("main"),t=document.createElement("div");t.classList.add("perks-control","body");const n=this.inputs.map((e=>`\n        <label>\n          ${e.label}: <input id="${e.id}" type="${e.type}" name="${e.id}">\n        </label>\n        <br>\n      `)).join("");(0,i.insertInnerHtml)(t,`<strong>Testing (staging only):</strong>\n      <form action="">\n        ${n}\n        <br>\n        <button type="submit">Go</button>\n      </form>`),e.append(t)}initDom(){this.dom={chromebook:document.getElementById(n.TEST_PARAMS.SIMULATE_CHROMEBOOK),testing:document.getElementById(n.TEST_PARAMS.SIMULATE_ELIGIBLE),akNow:document.getElementById(n.TEST_PARAMS.OVERRIDE_DATE),os:document.getElementById(n.TEST_PARAMS.SIMULATE_OS_VERSION)}}checkParams(){const e=new URLSearchParams(window.location.search);this.dom.chromebook.checked=/cros/i.test(navigator.userAgent)||e.get(n.TEST_PARAMS.SIMULATE_CHROMEBOOK)===n.TEST_PARAMS.SIMULATE_ON,this.dom.testing.checked=e.get(n.TEST_PARAMS.SIMULATE_ELIGIBLE)===n.TEST_PARAMS.SIMULATE_ON,e.get(n.TEST_PARAMS.OVERRIDE_DATE)?this.dom.akNow.value=e.get(n.TEST_PARAMS.OVERRIDE_DATE):this.dom.akNow.valueAsDate&&(this.dom.akNow.valueAsDate=new Date),e.get(n.TEST_PARAMS.SIMULATE_OS_VERSION)&&(this.dom.os.value=e.get(n.TEST_PARAMS.SIMULATE_OS_VERSION))}}}.apply(t,i),void 0===r||(e.exports=r)},3222:(e,t,n)=>{var i,r;i=[n,t,n(1100),n(5680)],r=function(e,t,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(){this.element=null,this.modalElement_=null,this.modalEnableCssClass_="modal-content--enable",this.modalElement_=document.querySelector("[data-perks-modal]"),this.setupPlayground(),this.modalElement_&&this.init()}init(){var e,t,i;const r=null===(e=this.element)||void 0===e?void 0:e.querySelector("#modal-selector"),o=["terms","steps","not-eligible"],s=document.querySelector(".redeem-perk__cb"),a=null===(t=this.element)||void 0===t?void 0:t.querySelector("#toggle-playground"),l=null===(i=this.element)||void 0===i?void 0:i.querySelector(".playground-content");null==a||a.addEventListener(n.Events.CLICK,(()=>{a.textContent=(null==l?void 0:l.classList.contains("active"))?"Show list":"Hide list",null==l||l.classList.toggle("active")})),null==r||r.addEventListener(n.Events.CHANGE,(e=>{const t=e.target.value;let n="";document.querySelectorAll(`.${this.modalEnableCssClass_}`).forEach((e=>{e.classList.remove(this.modalEnableCssClass_)})),o.includes(t)?(null==s||s.classList.add(this.modalEnableCssClass_),n=`.redeem-perk-${t}`):n=`.redeem-perk__${t}`;const i=document.querySelector(n);null==i||i.classList.add(this.modalEnableCssClass_)}))}setupPlayground(){var e;this.element=this.getPlaygroundEl(),null===(e=document.querySelector("dialog"))||void 0===e||e.appendChild(this.element)}getPlaygroundEl(){const e=document.createElement("div");e.classList.add("perks-modal-playground"),e.setAttribute("data-perks-modal-playground","");return(0,i.insertInnerHtml)(e,'\n      <div class="toggle-playground-container">\n        <button id="toggle-playground">Hide list</button>\n      </div>\n      <div class="playground-content active">\n        <h2 class="glue-headline">Select the desired modal case:</h2>\n        <select name="modal-selector" id="modal-selector">\n          <option value="not-cb">1. Not CB user</option>\n          <option value="not-supported-cb" >2. CB user - outdated</option>\n          <option value="terms" >3.1. CB user - eligible (redeem terms)</option>\n          <option value="steps" >3.2. CB user - eligible (redeem steps)</option>\n          <option value="not-eligible">3.3. CB user - not eligible / API not responding </option>\n        </select>\n      </div>\n    '),e}}}.apply(t,i),void 0===r||(e.exports=r)},2590:(e,t,n)=>{var i;i=function(e,t){"use strict";var n,i,r;Object.defineProperty(t,"__esModule",{value:!0}),t.AnalyticsTriggers=t.DataAttributes=t.CustomEvents=t.REDEEM_URL_ATTR=t.ELIGIBILITY_RESPONSE_MOCK=t.TEST_PARAMS=t.MIN_CHROMEOS_VERSION=void 0,t.MIN_CHROMEOS_VERSION=86,t.TEST_PARAMS={OVERRIDE_DATE:"ak-now",SIMULATE_CHROMEBOOK:"chromebook",SIMULATE_ELIGIBLE:"testing",SIMULATE_ON:"on",SIMULATE_OS_VERSION:"os"},t.ELIGIBILITY_RESPONSE_MOCK={eligibilityResponse:{etag:"Tyqj68Wvb4kJT4ky-esbTMxYqDs/yVUF28uUdD0-m8iz6iEQ161XHXg",kind:"chromeosregistration#resourcesItem",needHwid:!1,promoCode:"448366076138",promoCodeExpirationDate:"2019-01-01",redirectUrl:"",requestNonce:"1076098213626",responseNonce:"1311828009:1526592153617",result:"ELIGIBLE",serviceId:null,signature:"X3lRjIZHQpT81dpKsDtFE25KhklHf3YO0N5qgg1LukoyACbl336qhEvuox5tOw098eC9iqbH/o3CpuxTAymgPe/i+/fKvr7MeW5Q1hamVM6wXm5og3vAyuD5xjKGZQbpdVow/KRJdBxgdD1UeEENadmVuEk2Y3xa/dJ6ZHPYa6pFe4iiz3qcYN+DZtuGp60ZcwD1lpf1Pw4yx4a9R27WsxCw8+qbVkm/f6LC9po3elyDhhustYiHGCqswXX+vgqdBChq+HXp0RZhA0fdp1fUFDzCv/mwng0nRLbJLgsJ5qzst/8MwundkaBUaF0//DLNsQquPvEvWZ8/jTk4K9R3oA=="}},t.REDEEM_URL_ATTR={cartRef:"cartRef",utm_source:"utm_source",utm_medium:"utm_medium",utm_campaign:"utm_campaign",promoCode:"promoCode"},function(e){e.CUSTOM_REGISTER_REDEEM_PERK="customregisterredeemperk"}(n||(t.CustomEvents=n={})),function(e){e.DATA_MODAL_NAME="data-modal-name"}(i||(t.DataAttributes=i={})),function(e){e.ELEMENT_IS_VISIBLE="elementIsVisible"}(r||(t.AnalyticsTriggers=r={}))}.apply(t,[n,t]),void 0===i||(e.exports=i)},241:(e,t,n)=>{var i,r;i=[n,t,n(4863),n(7616),n(4456),n(52),n(9478),n(8173),n(7182),n(9235),n(6171),n(8131),n(7720)],void 0===(r=function(e,t,n,i,r,o,s,a,l,c,d,u,m){"use strict";({value:!0});const p=new n.default({state:c.appState,mutations:c.appMutations,getters:c.appGetters});!async function(){const{currentScript:e}=window.document,{perksSource:t,getPerkCta:n,learnMoreCta:c}=e.dataset;window.getPerkCta=n,window.learnMoreCta=c;const h=document.querySelector("[data-perks-modal]")||document.querySelector("[data-perks-heading-block]")||document.querySelector("[data-perks-hero]")||document.querySelector("[data-perks-grid]"),_={"[data-perks-modal]":{PerkComponent:s.CbPerksModal},"[data-perks-heading-block]":{PerkComponent:o.CbPerksHeadingBlock},"[data-perks-hero]":{PerkComponent:r.PerksCustomHero},"[data-perks-grid]":{PerkComponent:i.PerksCustomGrid}},g=new d.CustomAnalyticsService(p,window,document);if(h){(0,a.isDev)()&&new l.default;let e=[];try{e=await(0,u.getAllPerks)(t)}catch(t){e={error:t.message}}const n=await(0,m.default)(e);p.commit(p.mutations.setPerksData,{perksFilteredData:n});for(const[e,{PerkComponent:t}]of Object.entries(_))document.querySelectorAll(e).forEach((e=>{new t(e,p,g).build()}));g.setupTriggers()}}()}.apply(t,i))||(e.exports=r)},9235:(e,t,n)=>{var i,r;i=[n,t,n(9143),n(1631),n(8686)],r=function(e,t,n,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.appGetters=t.appMutations=t.appState=void 0,t.appState={...r.state,perksFilteredData:[]},t.appMutations={...i.mutations,setPerksData(e,{perksFilteredData:t}){e.perksFilteredData=t}},t.appGetters={...n.getters,perksFilteredData:({perksFilteredData:e})=>e}}.apply(t,i),void 0===r||(e.exports=r)},6171:(e,t,n)=>{var i,r;i=[n,t,n(5454),n(3627),n(2590)],r=function(e,t,n,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CustomAnalyticsService=void 0;const o="click";t.CustomAnalyticsService=class{constructor(e,t,n){this.customElementsToTrack=new Map,this.ignoredValue="",this.store=e,this.global=t,this.customDocument=n,this.eventInitializers={click:this.initializeClickEvent.bind(this),elementIsVisible:this.initializeElementIsVisibleEvent.bind(this)},this.observer=null}initializeListener(e,t,n){this.eventInitializers[e]&&this.eventInitializers[e](t,n)}setupTriggers(e){(e||[...this.customDocument.querySelectorAll(`[${s}]`)]).forEach((e=>{const t=this.getEventConfig(e);this.customElementsToTrack.set(e,new Map),Object.keys(t).forEach((n=>{this.customElementsToTrack.get(e).set(n,t[n]),this.initializeListener(n,e,t)}))}))}track(e,t){var n;let i={};if(t){if(!(null===(n=this.customElementsToTrack.get(t.element))||void 0===n?void 0:n.get(t.trigger)))throw new Error(`Analytic event -> ${t.trigger} <- does not exist.`);i={...this.customElementsToTrack.get(t.element).get(t.trigger),...e}}this.trackEvent(i)}initializeClickEvent(e){e.addEventListener(o,this.handleClickEvent.bind(this))}initializeElementIsVisibleEvent(e){var t;this.initIntersectionObserver(),null===(t=this.observer)||void 0===t||t.observe(e)}handleClickEvent(e){const t=e.currentTarget;this.trackEvent(this.customElementsToTrack.get(t).get(o))}onElementIsVisible(e){this.trackEvent(this.customElementsToTrack.get(e).get(r.AnalyticsTriggers.ELEMENT_IS_VISIBLE))}getEventConfig(e){return(0,n.default)(e,s)}initIntersectionObserver(){return this.observer=new IntersectionObserver(((e,t)=>e.forEach((e=>{e.isIntersecting&&(t.unobserve(e.target),this.onElementIsVisible(e.target))}))),{rootMargin:"0% 0% 0% 0%"}),this.observer}pushToDataLayer_(e){const t=this.cleanUpEvent(e);this.global.dataLayer.push(this.cleanUpEvent(t)),(0,i.nimbleLog)("ðŸ“ˆ New Perks GA event has been fired. ",t)}cleanUpEvent(e){return Object.entries(e).reduce(((e,[t,n])=>(e[t]=this.shouldSetUndefined(n)?void 0:n,e)),{})}shouldSetUndefined(e){return e===this.ignoredValue}trackEvent(e){e&&this.pushToDataLayer_(e)}};const s="data-perks-ga-config"}.apply(t,i),void 0===r||(e.exports=r)},5706:(e,t,n)=>{var i;i=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.checkEchoModelEligibility=t.checkModelEligibilityMock=t.checkModelEligibility=void 0;const n={eligibleServiceIds:["google.one.2019","stadia.2020","disney.2020","dropbox.2020","doom.ii.2020"],requestNonce:"1076098213626"};function i(){return new Promise((e=>{let t=!1,n=0;const i=window.setTimeout((()=>{var r;null===(r=null===chrome||void 0===chrome?void 0:chrome.runtime)||void 0===r||r.sendMessage("kddnkjkcjddckihglkfcickdhbmaodcn",{cmd:"checkModelEligibility"},(i=>{t=!0,clearTimeout(n),e(null!=i?i:{eligibleServiceIds:[]})})),n=window.setTimeout((()=>{t||(clearTimeout(i),e({eligibleServiceIds:[]}))}),1500)}),1e3)}))}function r(){return new Promise((e=>{e(n)}))}t.checkModelEligibility=i,t.checkModelEligibilityMock=r;t.checkEchoModelEligibility=async e=>{var t;const n=e?r:i;if(window.eligibleServiceIds)return window.eligibleServiceIds;try{const e=await n();window.eligibleServiceIds=null!==(t=null==e?void 0:e.eligibleServiceIds)&&void 0!==t?t:[]}catch(e){console.log(e),window.eligibleServiceIds=[]}return window.eligibleServiceIds}}.apply(t,[n,t]),void 0===i||(e.exports=i)},8131:(e,t,n)=>{var i,r;i=[n,t,n(8173),n(8201)],r=function(e,t,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPerksLocale=t.filterCardsPerks=t.filterLatestPerk=t.filterHeroPerks=t.getAPIPerksContent=t.getAllPublishedPerksByLocale=t.getAllPerks=void 0;function r(e,t){return Array.isArray(e)?null==e?void 0:e.find((e=>(null==e?void 0:e.locale)===t)):e}function o(e,t){return e.reduce(((e,n)=>{if(!e)return n;const[,i]=e,[,o]=n,s=r(i,t),a=r(o,t);if(!s||!s.heroStartDate)return n;return new Date(a.heroStartDate)>new Date(s.heroStartDate)?n:e}))}t.getAllPerks=function(e=""){let t=`${e}?cb=${(new Date).getTime()}`;if(window.perks)return new Promise((e=>{e(window.perks)}));if(t=decodeURI(t),(0,n.getLocales)()){const e=l();t=t.replace("{locale}",e.toLowerCase())}return fetch(t).then((e=>e.json())).then((e=>(window.perks=Object.entries(e),window.perks)))},t.getAllPublishedPerksByLocale=function(e,t){const i=t.split("_"),o=i[1]||i[0];return e.filter((e=>{const[,i]=e;if(0===(null==i?void 0:i.length))return!1;const s=r(i,t);if(!s)return!1;const{countryAllowlist:a,countryDenylist:l}=s;let{published:c}=s;const d=a&&a.includes(o.toUpperCase()),u=l&&!l.includes(o.toUpperCase());return(0,n.isDev)()&&(c=!0),c&&(d||u)}))},t.getAPIPerksContent=r,t.filterHeroPerks=function(e,t,n,s=[]){let a=e;const l=a.find((e=>e[0].includes("google.one"))),c=l?r(l[1],t):null,d=!(!l||!c)&&(new Date(c.start_date)<n&&new Date(c.end_date)>n);if(a=a.filter((e=>{const[,o]=e,a=r(o,t),{end_date:l,heroStartDate:c,id:d,specialHero:u,specialHeroNonChromebooks:m,start_date:p}=a,h=!p||new Date(p)<n,_=!l||new Date(l)>n,g=c&&new Date(c)<=n;return!(!h||!_)&&(m&&!(0,i.isChromebook)()?_&&g:u?_&&g&&s.includes(d):_&&g)})),0===a.length&&l&&d)return[l];{const e=o(a,t);if(e)return[e]}return a||[]},t.filterLatestPerk=o,t.filterCardsPerks=function(e,t,n,i,o,l,c){const d=e.filter((e=>{const[,t]=e,o=r(t,n),{end_date:s,start_date:a}=o,l=!a||new Date(a)<=i,c=!s||new Date(s)>i;return l&&c})),u=s(d,t,o,l,c);return a(u,n)};const s=(e,t,n=[],i=!1,r=!1)=>e.filter((e=>{const o=n.length>0,s=t.some((t=>t[0]===e[0]));return i&&!r&&o?n.includes(e[0])&&!s:!s})),a=(e=[],t="en_US")=>{if(0===e.length)return[];return[...e].sort(((e,n)=>{const i=r(e[1],t),o=r(n[1],t);return(i.featuredRank?i.featuredRank:100)-(o.featuredRank?o.featuredRank:100)})).map((e=>r(e[1],t)))};function l(){var e;const{locale:t}=(0,n.getLocales)(),i=(null==t?void 0:t.replace(/_(.*)/,((e,t)=>`_${t.toUpperCase()}`)))||"";return null!==(e={en:"en_US",ALL_ALL:"en_US","es-419_ALL":"es_MX",no_NO:"nb_NO"}[i])&&void 0!==e?e:i}t.getPerksLocale=l}.apply(t,i),void 0===r||(e.exports=r)},7720:(e,t,n)=>{var i,r;i=[n,t,n(5706),n(8131),n(8201)],r=function(e,t,n,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.runFilters=t.getAllPerksCards=t.getAllHeroPerks=void 0;const o=async e=>{const t=(0,i.getPerksLocale)(),o=(0,i.getAllPublishedPerksByLocale)(e,t),s=(0,r.isEligibleOverride)();let a=[];return(0,r.isChromebook)()&&!s&&(a=await(0,n.checkEchoModelEligibility)(s)),{perks:o,eligibleIDs:a,currentLocale:t}};t.getAllHeroPerks=async e=>{const t=(0,r.getCurrentDate)(),{perks:n,eligibleIDs:s,currentLocale:a}=await o(e);return(0,i.filterHeroPerks)(n,a,t,s).map((e=>{const[,t]=e;return(0,i.getAPIPerksContent)(t,(0,i.getPerksLocale)())}))};t.getAllPerksCards=async e=>{const t=(0,r.getCurrentDate)(),{perks:n,eligibleIDs:s,currentLocale:a}=await o(e),l=(0,i.filterHeroPerks)(n,a,t,s);return(0,i.filterCardsPerks)(n,l,a,t,s,(0,r.isChromebook)(),(0,r.isEligibleOverride)())};const s={splitData:t.getAllHeroPerks,cardsData:t.getAllPerksCards};t.runFilters=async e=>{let t={};for(const[n,i]of Object.entries(s)){t[n]=[];try{t[n]=await i(e)}catch(e){t[n]={error:e.message}}if("splitData"===n){const e=!Object.prototype.hasOwnProperty.call(t[n],"error")&&t[n].length>0;t={...t,hasHeroPerk:e}}}const n=Array.isArray(t.splitData)&&Array.isArray(t.cardsData)?[...t.splitData,...t.cardsData]:[];return{...t,allAvailablePerks:n}},t.default=t.runFilters}.apply(t,i),void 0===r||(e.exports=r)},8139:(e,t,n)=>{var i;i=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.processCustomDimensions=void 0;const n="internal",i="external",r=e=>{switch(e.tagName.toLowerCase()){case"a":return e.href;case"select":break;default:return""}return""},o={linkText:e=>{switch(e.tagName.toLowerCase()){case"select":case"a":case"button":return e.innerText.trim()||e.getAttribute("aria-label")}const t=e.querySelector("a, button");return t?t.getAttribute("aria-label")||t.innerText.trim():e.innerText.trim()},linkType:e=>{const t=r(e)||"/",o=new URL("/"===t?window.location.href:t),s=new RegExp("^(?:/intl/[^/]+)?/chromebook"),a=o.hostname===window.location.hostname||o.hostname.endsWith("www.google.com"),l=s.test(o.pathname);return a&&l?n:i},linkUrl:r};t.processCustomDimensions=(e,t)=>{const n={...t};return Object.keys(n).map((e=>{return{key:e,dimension:(t=e,t.split("_").map(((e,t)=>t>0?e[0].toUpperCase()+e.slice(1):e)).join(""))};var t})).filter((({key:e,dimension:t})=>!0===Boolean(n[e])&&t in o)).forEach((({key:i,dimension:r})=>n[i]=o[r](e,t))),n}}.apply(t,[n,t]),void 0===i||(e.exports=i)},9087:(e,t,n)=>{var i,r;i=[n,t,n(2590)],r=function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.customRedeemPerkEvent=void 0;t.customRedeemPerkEvent=({triggerElement:e,perkId:t,hasAutoOpening:i})=>new CustomEvent(n.CustomEvents.CUSTOM_REGISTER_REDEEM_PERK,{bubbles:!1,detail:{triggerElement:e,perkId:t,hasAutoOpening:i}})}.apply(t,i),void 0===r||(e.exports=r)},300:(e,t,n)=>{var i,r;i=[n,t,n(5680)],r=function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addWrapper=t.clearWrapper=void 0,t.clearWrapper=function(e){for(;e.firstChild;)e.removeChild(e.firstChild)},t.addWrapper=function(e,t,i){const r=document.createElement("div");r.classList.add(t),(0,n.insertInnerHtml)(r,i),e.append(r)}}.apply(t,i),void 0===r||(e.exports=r)},8201:(e,t,n)=>{var i,r;i=[n,t,n(830),n(8173),n(3522),n(2590)],r=function(e,t,n,i,r,o){"use strict";function s(e,t){return`${e}=${t}`}Object.defineProperty(t,"__esModule",{value:!0}),t.getFormattedAttribute_=t.formatRedeemURL=t.getOtcHashValue=t.chromebookOsVersion=t.isEligibleOverride=t.getCurrentDate=t.isChromebook=void 0,t.isChromebook=function(){let e=/cros/i.test(navigator.userAgent);if((0,i.isDev)()){const t=new URLSearchParams(window.location.search);e=e||t.get(o.TEST_PARAMS.SIMULATE_CHROMEBOOK)===o.TEST_PARAMS.SIMULATE_ON}return e},t.getCurrentDate=function(){const e=new Date,t=new URLSearchParams(window.location.search).get(o.TEST_PARAMS.OVERRIDE_DATE);return t?(0,n.getValidDate)(t):e},t.isEligibleOverride=function(){if((0,i.isDev)()){return new URLSearchParams(window.location.search).get(o.TEST_PARAMS.SIMULATE_ELIGIBLE)===o.TEST_PARAMS.SIMULATE_ON}return!1},t.chromebookOsVersion=function(){const e=/cros/i.test(navigator.userAgent),t=navigator.userAgent.match(/Chrome\/([\d.]+)/);let n=e&&(t?t[1]:null);if((0,i.isDev)()){const e=new URLSearchParams(window.location.search).get(o.TEST_PARAMS.SIMULATE_OS_VERSION);e&&(n=e)}return n?parseInt(n):n},t.getOtcHashValue=function(){const e="otc=",t=window.location.hash;if(t&&-1!==t.indexOf(e)){const n=t.indexOf(e)+4;return t.substring(n)}return null},t.formatRedeemURL=function(e){const t="TOKEN",n=`${s(o.REDEEM_URL_ATTR.cartRef,(0,r.getUrlParameter)(o.REDEEM_URL_ATTR.cartRef,e))}&`;return encodeURI(e.replace(n,t)).replace(t,n)},t.getFormattedAttribute_=s}.apply(t,i),void 0===r||(e.exports=r)},8975:(e,t,n)=>{var i,r;i=[n,t,n(2590)],r=function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getActiveModalName=void 0,t.getActiveModalName=function(e){const t=e.closest(`[${n.DataAttributes.DATA_MODAL_NAME}]`);return t?t.getAttribute(n.DataAttributes.DATA_MODAL_NAME):""}}.apply(t,i),void 0===r||(e.exports=r)},761:(e,t,n)=>{var i;i=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCurrentScrollPercentage=void 0;t.getCurrentScrollPercentage=()=>{const e=(window.scrollY||document.documentElement.scrollTop)/(document.documentElement.scrollHeight-document.documentElement.clientHeight-window.innerHeight)*100;return e>100?100:Math.round(e)}}.apply(t,[n,t]),void 0===i||(e.exports=i)},9915:(e,t,n)=>{var i;i=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.altAttr=t.loadingAttr=void 0;t.loadingAttr=e=>e&&"boolean"==typeof e?"lazy":"eager";t.altAttr=e=>e&&"string"==typeof e?e:""}.apply(t,[n,t]),void 0===i||(e.exports=i)},8287:(e,t,n)=>{var i;i=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.localizeLink=void 0;const n="/chromebook/";t.localizeLink=function(e,t=""){const i=e.includes("/intl/"),r=!e.startsWith("http")&&!e.startsWith("//");let o=t,s=e;if(t||(o=location.pathname.split(n)[0]),!i&&r){s=`${o}${e.startsWith(n)?"":n}${e}`.replace(/\/\//g,"/")}return s}}.apply(t,[n,t]),void 0===i||(e.exports=i)}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var o=t[i]={exports:{}};return e[i].call(o.exports,o,o.exports,n),o.exports}n(241);n(6498)})();